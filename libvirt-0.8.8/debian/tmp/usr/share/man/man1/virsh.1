.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.07)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VIRSH 1"
.TH VIRSH 1 "2011-07-18" "libvirt-0.8.8" "Virtualization Support"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
virsh \- management user interface
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvirsh\fR [\fI\s-1OPTION\s0\fR]... [\fI\s-1COMMAND_STRING\s0\fR]
.PP
\&\fBvirsh\fR [\fI\s-1OPTION\s0\fR]... \fI\s-1COMMAND\s0\fR [\fI\s-1ARG\s0\fR]...
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBvirsh\fR program is the main interface for managing virsh guest
domains. The program can be used to create, pause, and shutdown
domains. It can also be used to list current domains. Libvirt is a C
toolkit to interact with the virtualization capabilities of recent
versions of Linux (and other OSes). It is free software available
under the \s-1GNU\s0 Lesser General Public License. Virtualization of the
Linux Operating System means the ability to run multiple instances of
Operating Systems concurrently on a single hardware system where the
basic resources are driven by a Linux instance. The library aims at
providing a long term stable C \s-1API\s0.  It currently supports Xen, QEmu,
\&\s-1KVM\s0, \s-1LXC\s0, OpenVZ, VirtualBox, OpenNebula, and VMware \s-1ESX\s0.
.PP
The basic structure of most virsh usage is:
.PP
.Vb 1
\&  virsh [OPTION]... <command> <domain\-id> [ARG]...
.Ve
.PP
Where \fIcommand\fR is one of the commands listed below, \fIdomain-id\fR
is the numeric domain id, or the domain name (which will be internally
translated to domain id), and \fI\s-1ARGS\s0\fR are command specific
options.  There are a few exceptions to this rule in the cases where
the command in question acts on all domains, the entire machine,
or directly on the xen hypervisor.  Those exceptions will be clear for
each of those commands.
.PP
The \fBvirsh\fR program can be used either to run one \fI\s-1COMMAND\s0\fR by giving the
command and its arguments on the shell command line, or a \fI\s-1COMMAND_STRING\s0\fR
which is a single shell argument consisting of multiple \fI\s-1COMMAND\s0\fR actions
and their arguments joined with whitespace, and separated by semicolons
between commands.  Within \fI\s-1COMMAND_STRING\s0\fR, virsh understands the
same single, double, and backslash escapes as the shell, although you must
add another layer of shell escaping in creating the single shell argument.
If no command is given in the command line, \fBvirsh\fR will then start a minimal
interpreter waiting for your commands, and the \fBquit\fR command will then exit
the program.
.PP
The \fBvirsh\fR program understands the following \fI\s-1OPTIONS\s0\fR.
.IP "\fB\-h\fR, \fB\-\-help\fR" 4
.IX Item "-h, --help"
Ignore all other arguments, and behave as if the \fBhelp\fR command were
given instead.
.IP "\fB\-v\fR, \fB\-\-version[=short]\fR" 4
.IX Item "-v, --version[=short]"
Ignore all other arguments, and prints the version of the libvirt library
virsh is coming from
.IP "\fB\-V\fR, \fB\-\-version=long\fR" 4
.IX Item "-V, --version=long"
Ignore all other arguments, and prints the version of the libvirt library
virsh is coming from and which options and driver are compiled in.
.IP "\fB\-c\fR, \fB\-\-connect\fR \fI\s-1URI\s0\fR" 4
.IX Item "-c, --connect URI"
Connect to the specified \fI\s-1URI\s0\fR, as if by the \fBconnect\fR command,
instead of the default connection.
.IP "\fB\-d\fR, \fB\-\-debug\fR \fI\s-1LEVEL\s0\fR" 4
.IX Item "-d, --debug LEVEL"
Enable debug messages at integer \fI\s-1LEVEL\s0\fR and above.  \fI\s-1LEVEL\s0\fR can
range from 0 (default) to 5.
.IP "\fB\-l\fR, \fB\-\-log\fR \fI\s-1FILE\s0\fR" 4
.IX Item "-l, --log FILE"
Output logging details to \fI\s-1FILE\s0\fR.
.IP "\fB\-q\fR, \fB\-\-quiet\fR" 4
.IX Item "-q, --quiet"
Avoid extra informational messages.
.IP "\fB\-r\fR, \fB\-\-readonly\fR" 4
.IX Item "-r, --readonly"
Make the initial connection read-only, as if by the \fI\-\-readonly\fR
option of the \fBconnect\fR command.
.IP "\fB\-t\fR, \fB\-\-timing\fR" 4
.IX Item "-t, --timing"
Output elapsed time information for each command.
.SH "NOTES"
.IX Header "NOTES"
Most \fBvirsh\fR operations rely upon the libvirt library being able to
connect to an already running libvirtd service.  This can usually be
done using the command \fBinvoke\-rc.d libvirt-bin start\fR.
.PP
Most \fBvirsh\fR commands require root privileges to run due to the
communications channels used to talk to the hypervisor.  Running as
non root will return an error.
.PP
Most \fBvirsh\fR commands act synchronously, except maybe shutdown,
setvcpus and setmem. In those cases the fact that the \fBvirsh\fR
program returned, may not mean the action is complete and you
must poll periodically to detect that the guest completed the
operation.
.SH "GENERIC COMMANDS"
.IX Header "GENERIC COMMANDS"
The following commands are generic i.e. not specific to a domain.
.IP "\fBhelp\fR optional \fIcommand-or-group\fR" 4
.IX Item "help optional command-or-group"
This lists each of the virsh commands.  When used without options, all
commands are listed, one per line, grouped into related categories,
displaying the keyword for each group.
.Sp
To display only commands for a specific group, give the keyword for that
group as an option.  For example:
.Sp
.Vb 1
\& virsh # help host
\&
\&  Host and Hypervisor (help keyword \*(Aqhost\*(Aq):
\&     capabilities                   capabilities
\&     connect                        (re)connect to hypervisor
\&     freecell                       NUMA free memory
\&     hostname                       print the hypervisor hostname
\&     qemu\-monitor\-command           Qemu Monitor Command
\&     sysinfo                        print the hypervisor sysinfo
\&     uri                            print the hypervisor canonical URI
.Ve
.Sp
To display detailed information for a specific command, give its name as the
option instead.  For example:
.Sp
.Vb 3
\& virsh # help list
\&   NAME
\&     list \- list domains
\&
\&   SYNOPSIS
\&     list [\-\-inactive] [\-\-all]
\&
\&   DESCRIPTION
\&     Returns list of domains.
\&
\&   OPTIONS
\&     \-\-inactive       list inactive domains
\&     \-\-all            list inactive & active domains
.Ve
.IP "\fBquit\fR, \fBexit\fR" 4
.IX Item "quit, exit"
quit this interactive terminal
.IP "\fBversion\fR" 4
.IX Item "version"
Will print out the major version info about what this built from.
.RS 4
.Sp
.RS 4
\&\fBExample\fR
.Sp
\&\fBvirsh\fR version
.Sp
Compiled against library: libvir 0.0.6
.Sp
Using library: libvir 0.0.6
.Sp
Using \s-1API:\s0 Xen 3.0.0
.Sp
Running hypervisor: Xen 3.0.0
.RE
.RE
.RS 4
.RE
.IP "\fBcd\fR optional \fIdirectory\fR" 4
.IX Item "cd optional directory"
Will change current directory to \fIdirectory\fR.  The default directory
for the \fBcd\fR command is the home directory or, if there is no \fI\s-1HOME\s0\fR
variable in the environment, the root directory.
.Sp
This command is only available in interactive mode.
.IP "\fBpwd\fR" 4
.IX Item "pwd"
Will print the current directory.
.IP "\fBconnect\fR \fI\s-1URI\s0\fR optional \fI\-\-readonly\fR" 4
.IX Item "connect URI optional --readonly"
(Re)\-Connect to the hypervisor. When the shell is first started, this
is automatically run with the \fI\s-1URI\s0\fR parameter requested by the \f(CW\*(C`\-c\*(C'\fR
option on the command line. The \fI\s-1URI\s0\fR parameter specifies how to
connect to the hypervisor. The documentation page at
<http://libvirt.org/uri.html> list the values supported, but the most
common are:
.RS 4
.IP "xen:///" 4
.IX Item "xen:///"
this is used to connect to the local Xen hypervisor, this is the default
.IP "qemu:///system" 4
.IX Item "qemu:///system"
connect locally as root to the daemon supervising QEmu and \s-1KVM\s0 domains
.IP "qemu:///session" 4
.IX Item "qemu:///session"
connect locally as a normal user to his own set of QEmu and \s-1KVM\s0 domains
.IP "lxc:///" 4
.IX Item "lxc:///"
connect to a local linux container
.RE
.RS 4
.Sp
For remote access see the documentation page on how to make URIs.
The \fI\-\-readonly\fR option allows for read-only connection
.RE
.IP "\fBuri\fR" 4
.IX Item "uri"
Prints the hypervisor canonical \s-1URI\s0, can be useful in shell mode.
.IP "\fBhostname\fR" 4
.IX Item "hostname"
Print the hypervisor hostname.
.IP "\fBsysinfo\fR" 4
.IX Item "sysinfo"
Print the \s-1XML\s0 representation of the hypervisor sysinfo, if available.
.IP "\fBnodeinfo\fR" 4
.IX Item "nodeinfo"
Returns basic information about the node, like number and type of \s-1CPU\s0,
and size of the physical memory.
.IP "\fBcapabilities\fR" 4
.IX Item "capabilities"
Print an \s-1XML\s0 document describing the capabilities of the hypervisor
we are currently connected to. This includes a section on the host
capabilities in terms of \s-1CPU\s0 and features, and a set of description
for each kind of guest which can be virtualized. For a more complete
description see:
  <http://libvirt.org/formatcaps.html>
The \s-1XML\s0 also show the \s-1NUMA\s0 topology information if available.
.IP "\fBlist\fR optional \fI\-\-inactive\fR \fI\-\-all\fR" 4
.IX Item "list optional --inactive --all"
Prints information about one or more domains.  If no domains are
specified it prints out information about running domains.
.Sp
An example format for the list is as follows:
.Sp
\&\fBvirsh\fR list
 Id Name                 State
.Sp
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.Sp
.Vb 2
\&  0 Domain\-0             running
\&  2 fedora               paused
.Ve
.Sp
Name is the name of the domain.  \s-1ID\s0 the domain numeric id.
State is the run state (see below).
.Sp
\&\fB\s-1STATES\s0\fR
.Sp
The State field lists 7 states for a domain, and which ones the
current domain is in.
.RS 4
.IP "\fBrunning\fR" 4
.IX Item "running"
The domain is currently running on a \s-1CPU\s0
.IP "\fBidle\fR" 4
.IX Item "idle"
The domain is idle, and not running or runnable.  This can be caused
because the domain is waiting on \s-1IO\s0 (a traditional wait state) or has
gone to sleep because there was nothing else for it to do.
.IP "\fBpaused\fR" 4
.IX Item "paused"
The domain has been paused, usually occurring through the administrator
running \fBvirsh suspend\fR.  When in a paused state the domain will still
consume allocated resources like memory, but will not be eligible for
scheduling by the hypervisor.
.IP "\fBshutdown\fR" 4
.IX Item "shutdown"
The domain is in the process of shutting down, i.e. the guest operating system
has been notified and should be in the process of stopping its operations
gracefully.
.IP "\fBshut off\fR" 4
.IX Item "shut off"
The domain is not running.  Usually this indicates the domain has been
shut down completely, or has not been started.
.IP "\fBcrashed\fR" 4
.IX Item "crashed"
The domain has crashed, which is always a violent ending.  Usually
this state can only occur if the domain has been configured not to
restart on crash.
.IP "\fBdying\fR" 4
.IX Item "dying"
The domain is in process of dying, but hasn't completely shutdown or
crashed.
.RE
.RS 4
.RE
.IP "\fBfreecell\fR optional \fIcellno\fR" 4
.IX Item "freecell optional cellno"
Prints the available amount of memory on the machine or within a
\&\s-1NUMA\s0 cell if \fIcellno\fR is provided.
.IP "\fBcpu-baseline\fR \fI\s-1FILE\s0\fR" 4
.IX Item "cpu-baseline FILE"
Compute baseline \s-1CPU\s0 which will be supported by all host CPUs given in <file>.
The list of host CPUs is built by extracting all <cpu> elements from the
<file>. Thus, the <file> can contain either a set of <cpu> elements separated
by new lines or even a set of complete <capabilities> elements printed by
\&\fBcapabilities\fR command.
.IP "\fBcpu-compare\fR \fI\s-1FILE\s0\fR" 4
.IX Item "cpu-compare FILE"
Compare \s-1CPU\s0 definition from \s-1XML\s0 <file> with host \s-1CPU\s0. The \s-1XML\s0 <file> may
contain either host or guest \s-1CPU\s0 definition. The host \s-1CPU\s0 definition is the
<cpu> element and its contents as printed by \fBcapabilities\fR command. The
guest \s-1CPU\s0 definition is the <cpu> element and its contents from domain \s-1XML\s0
definition. For more information on guest \s-1CPU\s0 definition see:
<http://libvirt.org/formatdomain.html#elementsCPU>
.SH "DOMAIN COMMANDS"
.IX Header "DOMAIN COMMANDS"
The following commands manipulate domains directly, as stated
previously most commands take domain-id as the first parameter. The
\&\fIdomain-id\fR can be specified as a short integer, a name or a full \s-1UUID\s0.
.IP "\fBautostart\fR optional \fI\-\-disable\fR \fIdomain-id\fR" 4
.IX Item "autostart optional --disable domain-id"
Configure a domain to be automatically started at boot.
.Sp
The option \fI\-\-disable\fR disables autostarting.
.IP "\fBconsole\fR \fIdomain-id\fR [\fIdevname\fR]" 4
.IX Item "console domain-id [devname]"
Connect the virtual serial console for the guest. The optional
\&\fIdevname\fR parameter refers to the device alias of an alternate
console, serial or parallel device configured for the guest.
If omitted, the primary console will be opened.
.IP "\fBcreate\fR \fI\s-1FILE\s0\fR optional \fI\-\-console\fR \fI\-\-paused\fR" 4
.IX Item "create FILE optional --console --paused"
Create a domain from an \s-1XML\s0 <file>. An easy way to create the \s-1XML\s0
<file> is to use the \fBdumpxml\fR command to obtain the definition of a
pre-existing guest.  The domain will be paused if the \fI\-\-paused\fR option
is used and supported by the driver; otherwise it will be running.
If \fI\-\-console\fR is requested, attach to the console after creation.
.Sp
\&\fBExample\fR
.Sp
.Vb 3
\& virsh dumpxml <domain\-id> > domain.xml
\& vi domain.xml (or make changes with your other text editor)
\& virsh create < domain.xml
.Ve
.IP "\fBdefine\fR \fI\s-1FILE\s0\fR" 4
.IX Item "define FILE"
Define a domain from an \s-1XML\s0 <file>. The domain definition is registered
but not started.
.IP "\fBdestroy\fR \fIdomain-id\fR" 4
.IX Item "destroy domain-id"
Immediately terminate the domain domain-id.  This doesn't give the domain
\&\s-1OS\s0 any chance to react, and it's the equivalent of ripping the power
cord out on a physical machine.  In most cases you will want to use
the \fBshutdown\fR command instead.
.IP "\fBdomblkstat\fR \fIdomain\fR \fIblock-device\fR" 4
.IX Item "domblkstat domain block-device"
Get device block stats for a running domain.
.IP "\fBdomifstat\fR \fIdomain\fR \fIinterface-device\fR" 4
.IX Item "domifstat domain interface-device"
Get network interface stats for a running domain.
.IP "\fBdommemstat\fR \fIdomain\fR" 4
.IX Item "dommemstat domain"
Get memory stats for a running domain.
.IP "\fBdomblkinfo\fR \fIdomain\fR \fIblock-device\fR" 4
.IX Item "domblkinfo domain block-device"
Get block device size info for a domain.
.IP "\fBdominfo\fR \fIdomain-id\fR" 4
.IX Item "dominfo domain-id"
Returns basic information about the domain.
.IP "\fBdomuuid\fR \fIdomain-name-or-id\fR" 4
.IX Item "domuuid domain-name-or-id"
Convert a domain name or id to domain \s-1UUID\s0
.IP "\fBdomid\fR \fIdomain-name-or-uuid\fR" 4
.IX Item "domid domain-name-or-uuid"
Convert a domain name (or \s-1UUID\s0) to a domain id
.IP "\fBdomjobabort\fR \fIdomain-id-or-uuid\fR" 4
.IX Item "domjobabort domain-id-or-uuid"
Abort the currently running domain job.
.IP "\fBdomjobinfo\fR \fIdomain-id-or-uuid\fR" 4
.IX Item "domjobinfo domain-id-or-uuid"
Returns information about jobs running on a domain.
.IP "\fBdomname\fR \fIdomain-id-or-uuid\fR" 4
.IX Item "domname domain-id-or-uuid"
Convert a domain Id (or \s-1UUID\s0) to domain name
.IP "\fBdomstate\fR \fIdomain-id\fR" 4
.IX Item "domstate domain-id"
Returns state about a running domain.
.IP "\fBdomxml-from-native\fR \fIformat\fR \fIconfig\fR" 4
.IX Item "domxml-from-native format config"
Convert the file \fIconfig\fR in the native guest configuration format
named by \fIformat\fR to a domain \s-1XML\s0 format.
.IP "\fBdomxml-to-native\fR \fIformat\fR \fIxml\fR" 4
.IX Item "domxml-to-native format xml"
Convert the file \fIxml\fR in domain \s-1XML\s0 format to the native guest
configuration format named by \fIformat\fR.
.IP "\fBdump\fR \fIdomain-id\fR \fIcorefilepath\fR" 4
.IX Item "dump domain-id corefilepath"
Dumps the core of a domain to a file for analysis.
.IP "\fBdumpxml\fR \fIdomain-id\fR optional \fI\-\-inactive\fR \fI\-\-security\-info\fR \fI\-\-update\-cpu\fR" 4
.IX Item "dumpxml domain-id optional --inactive --security-info --update-cpu"
Output the domain information as an \s-1XML\s0 dump to stdout, this format can be used
by the \fBcreate\fR command. Additional options affecting the \s-1XML\s0 dump may be
used. \fI\-\-inactive\fR tells virsh to dump domain configuration that will be used
on next start of the domain as opposed to the current domain configuration.
Using \fI\-\-security\-info\fR security sensitive information will also be included
in the \s-1XML\s0 dump. \fI\-\-update\-cpu\fR updates domain \s-1CPU\s0 requirements according to
host \s-1CPU\s0.
.IP "\fBecho\fR optional \fI\-\-shell\fR \fI\-\-xml\fR \fIarg\fR..." 4
.IX Item "echo optional --shell --xml arg..."
Echo back each \fIarg\fR, separated by space.  If \fI\-\-shell\fR is
specified, then the output will be single-quoted where needed, so that
it is suitable for reuse in a shell context.  If \fI\-\-xml\fR is
specified, then the output will be escaped for use in \s-1XML\s0.
.IP "\fBedit\fR \fIdomain-id\fR" 4
.IX Item "edit domain-id"
Edit the \s-1XML\s0 configuration file for a domain.
.Sp
This is equivalent to:
.Sp
.Vb 3
\& virsh dumpxml domain > domain.xml
\& vi domain.xml (or make changes with your other text editor)
\& virsh define domain.xml
.Ve
.Sp
except that it does some error checking.
.Sp
The editor used can be supplied by the \f(CW$VISUAL\fR or \f(CW$EDITOR\fR environment
variables, and defaults to \f(CW\*(C`vi\*(C'\fR.
.IP "\fBmanagedsave\fR \fIdomain-id\fR" 4
.IX Item "managedsave domain-id"
Save and destroy a running domain, so it can be restarted from the same
state at a later time.  When the virsh \fBstart\fR command is next run for
the domain, it will automatically be started from this saved state.
.IP "\fBmanagedsave-remove\fR \fIdomain-id\fR" 4
.IX Item "managedsave-remove domain-id"
Remove the \fBmanagedsave\fR state file for a domain, if it exists.  This
ensures the domain will do a full boot the next time it is started.
.IP "\fBmaxvcpus\fR optional \fItype\fR" 4
.IX Item "maxvcpus optional type"
Provide the maximum number of virtual CPUs supported for a guest \s-1VM\s0 on
this connection.  If provided, the \fItype\fR parameter must be a valid
type attribute for the <domain> element of \s-1XML\s0.
.IP "\fBmigrate\fR optional \fI\-\-live\fR \fI\-\-p2p\fR \fI\-\-direct\fR \fI\-\-tunnelled\fR \fI\-\-persistent\fR \fI\-\-undefinesource\fR \fI\-\-suspend\fR \fI\-\-copy\-storage\-all\fR \fI\-\-copy\-storage\-inc\fR \fI\-\-verbose\fR \fIdomain-id\fR \fIdesturi\fR \fImigrateuri\fR \fIdname\fR \fI\-\-timeout\fR" 4
.IX Item "migrate optional --live --p2p --direct --tunnelled --persistent --undefinesource --suspend --copy-storage-all --copy-storage-inc --verbose domain-id desturi migrateuri dname --timeout"
Migrate domain to another host.  Add \fI\-\-live\fR for live migration; \fI\-\-p2p\fR
for peer\-2\-peer migration; \fI\-\-direct\fR for direct migration; or \fI\-\-tunnelled\fR
for tunnelled migration.  \fI\-\-persistent\fR leaves the domain persistent on
destination host, \fI\-\-undefinesource\fR undefines the domain on the source host,
and \fI\-\-suspend\fR leaves the domain paused on the destination host.
\&\fI\-\-copy\-storage\-all\fR indicates migration with non-shared storage with full
disk copy, \fI\-\-copy\-storage\-inc\fR indicates migration with non-shared storage
with incremental copy (same base image shared between source and destination).
\&\fI\-\-verbose\fR displays the progress of migration.
.Sp
The \fIdesturi\fR is the connection \s-1URI\s0 of the destination host, and
\&\fImigrateuri\fR is the migration \s-1URI\s0, which usually can be omitted.
\&\fIdname\fR is used for renaming the domain to new name during migration, which
also usually can be omitted.
.Sp
\&\fI\-\-timeout\fR forces guest to suspend when live migration exceeds timeout, and
then the migration will complete offline. It can only be used with \fI\-\-live\fR.
.Sp
\&\fBNote\fR: The \fIdesturi\fR parameter for normal migration and peer2peer migration
has different semantics:
.RS 4
.IP "\(bu" 4
normal migration: the \fIdesturi\fR is an address of the target host as
seen from the client machine.
.IP "\(bu" 4
peer2peer migration: the \fIdesturi\fR is an address of the target host as
seen from the source machine.
.RE
.RS 4
.RE
.IP "\fBmigrate-setmaxdowntime\fR \fIdomain-id\fR \fIdowntime\fR" 4
.IX Item "migrate-setmaxdowntime domain-id downtime"
Set maximum tolerable downtime for a domain which is being live-migrated to
another host.  The \fIdowntime\fR is a number of milliseconds the guest is allowed
to be down at the end of live migration.
.IP "\fBreboot\fR \fIdomain-id\fR" 4
.IX Item "reboot domain-id"
Reboot a domain.  This acts just as if the domain had the \fBreboot\fR
command run from the console.  The command returns as soon as it has
executed the reboot action, which may be significantly before the
domain actually reboots.
.Sp
The exact behavior of a domain when it reboots is set by the
\&\fIon_reboot\fR parameter in the domain's \s-1XML\s0 definition.
.IP "\fBrestore\fR \fIstate-file\fR" 4
.IX Item "restore state-file"
Restores a domain from an \fBvirsh save\fR state file.  See \fIsave\fR for more info.
.IP "\fBsave\fR \fIdomain-id\fR \fIstate-file\fR" 4
.IX Item "save domain-id state-file"
Saves a running domain to a state file so that it can be restored
later.  Once saved, the domain will no longer be running on the
system, thus the memory allocated for the domain will be free for
other domains to use.  \fBvirsh restore\fR restores from this state file.
.Sp
This is roughly equivalent to doing a hibernate on a running computer,
with all the same limitations.  Open network connections may be
severed upon restore, as \s-1TCP\s0 timeouts may have expired.
.IP "\fBschedinfo\fR optional \fI\-\-set\fR \fBparameter=value\fR \fIdomain-id\fR" 4
.IX Item "schedinfo optional --set parameter=value domain-id"
.PD 0
.IP "\fBschedinfo\fR optional \fI\-\-weight\fR \fBnumber\fR optional \fI\-\-cap\fR \fBnumber\fR \fIdomain-id\fR" 4
.IX Item "schedinfo optional --weight number optional --cap number domain-id"
.PD
Allows you to show (and set) the domain scheduler parameters. The parameters available for each hypervisor are:
.Sp
\&\s-1LXC\s0, \s-1QEMU/KVM\s0 (posix scheduler): cpu_shares
.Sp
Xen (credit scheduler): weight, cap
.Sp
\&\s-1ESX\s0 (allocation scheduler): reservation, limit, shares
.Sp
\&\fBNote\fR: The cpu_shares parameter has a valid value range of 0\-262144; Negative
values are wrapped to positive, and larger values are capped at the maximum.
Therefore, \-1 is a useful shorthand for 262144.
.Sp
\&\fBNote\fR: The weight and cap parameters are defined only for the
\&\s-1XEN_CREDIT\s0 scheduler and are now \fI\s-1DEPRECATED\s0\fR.
.IP "\fBsetmem\fR \fIdomain-id\fR \fBkilobytes\fR" 4
.IX Item "setmem domain-id kilobytes"
Immediately change the current memory allocation for an active guest domain.
.Sp
Some hypervisors require a larger granularity than kilobytes, and requests
that are not an even multiple will be rounded up.  For example, vSphere/ESX
rounds the parameter up unless the kB argument is evenly divisible by 1024
(that is, the kB argument happens to represent megabytes).
.Sp
For Xen, you can only adjust the memory of a running domain if the domain is
paravirtualized or running the \s-1PV\s0 balloon driver.
.Sp
Note, this command only works on active guest domains.  To change the memory
allocation for an inactive guest domain, use the virsh \fBedit\fR command to
update the \s-1XML\s0 <currentMemory> element.
.IP "\fBsetmaxmem\fR \fIdomain-id\fR \fBkilobytes\fR" 4
.IX Item "setmaxmem domain-id kilobytes"
Change the maximum memory allocation limit for an inactive guest domain.
.Sp
This command works for at least the Xen and vSphere/ESX hypervisors,
but not for \s-1QEMU/KVM\s0.
.Sp
Some hypervisors require a larger granularity than kilobytes, rounding up
requests that are not an even multiple of the desired amount.  vSphere/ESX
is one of these, requiring the parameter to be evenly divisible by 4MB.  For
vSphere/ESX, 263168 (257MB) would be rounded up because it's not a multiple
of 4MB, while 266240 (260MB) is valid without rounding.
.Sp
Note, to change the maximum memory allocation for a \s-1QEMU/KVM\s0 guest domain,
use the virsh \fBedit\fR command instead to update its \s-1XML\s0 <memory> element.
.IP "\fBmemtune\fR \fIdomain-id\fR optional \fI\-\-hard\-limit\fR \fBkilobytes\fR optional \fI\-\-soft\-limit\fR \fBkilobytes\fR optional \fI\-\-swap\-hard\-limit\fR \fBkilobytes\fR \-\fI\-\-min\-guarantee\fR \fBkilobytes\fR" 4
.IX Item "memtune domain-id optional --hard-limit kilobytes optional --soft-limit kilobytes optional --swap-hard-limit kilobytes ---min-guarantee kilobytes"
Allows you to display or set the domain memory parameters. Without
flags, the current settings are displayed; with a flag, the
appropriate limit is adjusted if supported by the hypervisor.  \s-1LXC\s0 and
\&\s-1QEMU/KVM\s0 supports \fI\-\-hard\-limit\fR, \fI\-\-soft\-limit\fR, and \fI\-\-swap\-hard\-limit\fR.
.IP "\fBsetvcpus\fR \fIdomain-id\fR \fIcount\fR optional \fI\-\-maximum\fR \fI\-\-config\fR \fI\-\-live\fR" 4
.IX Item "setvcpus domain-id count optional --maximum --config --live"
Change the number of virtual CPUs active in a guest domain.  By default,
this command works on active guest domains.  To change the settings for an
inactive guest domain, use the \fI\-\-config\fR flag.
.Sp
The \fIcount\fR value may be limited by host, hypervisor, or a limit coming
from the original description of the guest domain. For Xen, you can only
adjust the virtual CPUs of a running domain if the domain is paravirtualized.
.Sp
If the \fI\-\-config\fR flag is specified, the change is made to the stored \s-1XML\s0
configuration for the guest domain, and will only take effect when the guest
domain is next started.
.Sp
If \fI\-\-live\fR is specified, the guest domain must be active, and the change
takes place immediately.  Both the \fI\-\-config\fR and \fI\-\-live\fR flags may be
specified together if supported by the hypervisor.
.Sp
When neither the \fI\-\-config\fR nor \fI\-\-live\fR flags are given, the \fI\-\-live\fR
flag is assumed and the guest domain must be active.  In this situation it
is up to the hypervisor whether the \fI\-\-config\fR flag is also assumed, and
therefore whether the \s-1XML\s0 configuration is adjusted to make the change
persistent.
.Sp
The \fI\-\-maximum\fR flag controls the maximum number of virtual cpus that can
be hot-plugged the next time the domain is booted.  As such, it must only be
used with the \fI\-\-config\fR flag, and not with the \fI\-\-live\fR flag.
.IP "\fBshutdown\fR \fIdomain-id\fR" 4
.IX Item "shutdown domain-id"
Gracefully shuts down a domain.  This coordinates with the domain \s-1OS\s0
to perform graceful shutdown, so there is no guarantee that it will
succeed, and may take a variable length of time depending on what
services must be shutdown in the domain.
.Sp
The exact behavior of a domain when it shuts down is set by the
\&\fIon_shutdown\fR parameter in the domain's \s-1XML\s0 definition.
.IP "\fBstart\fR \fIdomain-name\fR optional \fI\-\-console\fR \fI\-\-paused\fR" 4
.IX Item "start domain-name optional --console --paused"
Start a (previously defined) inactive domain, either from the last
\&\fBmanagedsave\fR state, or via a fresh boot if no managedsave state is
present.  The domain will be paused if the \fI\-\-paused\fR option is
used and supported by the driver; otherwise it will be running.
If \fI\-\-console\fR is requested, attach to the console after creation.
.IP "\fBsuspend\fR \fIdomain-id\fR" 4
.IX Item "suspend domain-id"
Suspend a running domain. It is kept in memory but won't be scheduled
anymore.
.IP "\fBresume\fR \fIdomain-id\fR" 4
.IX Item "resume domain-id"
Moves a domain out of the suspended state.  This will allow a previously
suspended domain to now be eligible for scheduling by the underlying
hypervisor.
.IP "\fBttyconsole\fR \fIdomain-id\fR" 4
.IX Item "ttyconsole domain-id"
Output the device used for the \s-1TTY\s0 console of the domain. If the information
is not available the processes will provide an exit code of 1.
.IP "\fBundefine\fR \fIdomain-id\fR" 4
.IX Item "undefine domain-id"
Undefine the configuration for an inactive domain. Since it's not running
the domain name or \s-1UUID\s0 must be used as the \fIdomain-id\fR.
.IP "\fBvcpucount\fR \fIdomain-id\fR  optional \fI\-\-maximum\fR \fI\-\-current\fR \fI\-\-config\fR \fI\-\-live\fR" 4
.IX Item "vcpucount domain-id  optional --maximum --current --config --live"
Print information about the virtual cpu counts of the given
\&\fIdomain-id\fR.  If no flags are specified, all possible counts are
listed in a table; otherwise, the output is limited to just the
numeric value requested.
.Sp
\&\fI\-\-maximum\fR requests information on the maximum cap of vcpus that a
domain can add via \fBsetvcpus\fR, while \fI\-\-current\fR shows the current
usage; these two flags cannot both be specified.  \fI\-\-config\fR
requests information regarding the next time the domain will be
booted, while \fI\-\-live\fR requires a running domain and lists current
values; these two flags cannot both be specified.
.IP "\fBvcpuinfo\fR \fIdomain-id\fR" 4
.IX Item "vcpuinfo domain-id"
Returns basic information about the domain virtual CPUs, like the number of
vCPUs, the running time, the affinity to physical processors.
.IP "\fBvcpupin\fR \fIdomain-id\fR \fIvcpu\fR \fIcpulist\fR" 4
.IX Item "vcpupin domain-id vcpu cpulist"
Pin domain VCPUs to host physical CPUs. The \fIvcpu\fR number must be provided
and \fIcpulist\fR is a comma separated list of physical \s-1CPU\s0 numbers.
.IP "\fBvncdisplay\fR \fIdomain-id\fR" 4
.IX Item "vncdisplay domain-id"
Output the \s-1IP\s0 address and port number for the \s-1VNC\s0 display. If the information
is not available the processes will provide an exit code of 1.
.SH "DEVICE COMMANDS"
.IX Header "DEVICE COMMANDS"
The following commands manipulate devices associated to domains.
The domain-id can be specified as a short integer, a name or a full \s-1UUID\s0.
To better understand the values allowed as options for the command
reading the documentation at <http://libvirt.org/formatdomain.html> on the
format of the device sections to get the most accurate set of accepted values.
.IP "\fBattach-device\fR \fIdomain-id\fR \fI\s-1FILE\s0\fR" 4
.IX Item "attach-device domain-id FILE"
Attach a device to the domain, using a device definition in an \s-1XML\s0 file.
See the documentation to learn about libvirt \s-1XML\s0 format for a device.
For cdrom and floppy devices, this command only replaces the media within
the single existing device; consider using \fBupdate-device\fR for this usage.
.IP "\fBattach-disk\fR \fIdomain-id\fR \fIsource\fR \fItarget\fR optional \fI\-\-driver driver\fR \fI\-\-subdriver subdriver\fR \fI\-\-type type\fR \fI\-\-mode mode\fR \fI\-\-persistent\fR \fI\-\-sourcetype soucetype\fR" 4
.IX Item "attach-disk domain-id source target optional --driver driver --subdriver subdriver --type type --mode mode --persistent --sourcetype soucetype"
Attach a new disk device to the domain.
\&\fIsource\fR and \fItarget\fR are paths for the files and devices.
\&\fIdriver\fR can be \fIfile\fR, \fItap\fR or \fIphy\fR depending on the kind of access.
\&\fItype\fR can indicate \fIcdrom\fR or \fIfloppy\fR as alternative to the disk default,
although this use only replaces the media within the existing virtual cdrom or
floppy device; consider using \fBupdate-device\fR for this usage instead.
\&\fImode\fR can specify the two specific mode \fIreadonly\fR or \fIshareable\fR.
\&\fIpersistent\fR indicates the changes will affect the next boot of the domain.
\&\fIsourcetype\fR can indicate the type of source (block|file)
.IP "\fBattach-interface\fR \fIdomain-id\fR \fItype\fR \fIsource\fR optional \fI\-\-target target\fR \fI\-\-mac mac\fR \fI\-\-script script\fR \fI\-\-model model\fR \fI\-\-persistent\fR" 4
.IX Item "attach-interface domain-id type source optional --target target --mac mac --script script --model model --persistent"
Attach a new network interface to the domain.
\&\fItype\fR can be either \fInetwork\fR to indicate a physical network device or \fIbridge\fR to indicate a bridge to a device.
\&\fIsource\fR indicates the source device.
\&\fItarget\fR allows to indicate the target device in the guest.
\&\fImac\fR allows to specify the \s-1MAC\s0 address of the network interface.
\&\fIscript\fR allows to specify a path to a script handling a bridge instead of
the default one.
\&\fImodel\fR allows to specify the model type.
\&\fIpersistent\fR indicates the changes will affect the next boot of the domain.
.IP "\fBdetach-device\fR \fIdomain-id\fR \fI\s-1FILE\s0\fR" 4
.IX Item "detach-device domain-id FILE"
Detach a device from the domain, takes the same kind of \s-1XML\s0 descriptions
as command \fBattach-device\fR.
.IP "\fBdetach-disk\fR \fIdomain-id\fR \fItarget\fR" 4
.IX Item "detach-disk domain-id target"
Detach a disk device from a domain. The \fItarget\fR is the device as seen
from the domain.
.IP "\fBdetach-interface\fR \fIdomain-id\fR \fItype\fR optional \fI\-\-mac mac\fR" 4
.IX Item "detach-interface domain-id type optional --mac mac"
Detach a network interface from a domain.
\&\fItype\fR can be either \fInetwork\fR to indicate a physical network device or \fIbridge\fR to indicate a bridge to a device.
It is recommended to use the \fImac\fR option to distinguish between the interfaces
if more than one are present on the domain.
.IP "\fBupdate-device\fR \fIdomain-id\fR \fIfile\fR optional \fI\-\-persistent\fR \fI\-\-force\fR" 4
.IX Item "update-device domain-id file optional --persistent --force"
Update the characteristics of a device associated with \fIdomain-id\fR, based on
the device definition in an \s-1XML\s0 \fIfile\fR.  If the \fI\-\-persistent\fR option is
used, the changes will affect the next boot of the domain. The \fI\-\-force\fR
option can be used to force device update, e.g., to eject a CD-ROM even if it
is locked/mounted in the domain. See the documentation to learn about libvirt
\&\s-1XML\s0 format for a device.
.SH "VIRTUAL NETWORK COMMANDS"
.IX Header "VIRTUAL NETWORK COMMANDS"
The following commands manipulate networks. Libvirt has the capability to
define virtual networks which can then be used by domains and linked to
actual network devices. For more detailed information about this feature
see the documentation at <http://libvirt.org/formatnetwork.html> . A lot
of the command for virtual networks are similar to the one used for domains,
but the way to name a virtual network is either by its name or \s-1UUID\s0.
.IP "\fBnet-autostart\fR \fInetwork\fR optional \fI\-\-disable\fR" 4
.IX Item "net-autostart network optional --disable"
Configure a virtual network to be automatically started at boot.
The \fI\-\-disable\fR option disable autostarting.
.IP "\fBnet-create\fR \fIfile\fR" 4
.IX Item "net-create file"
Create a virtual network from an \s-1XML\s0 \fIfile\fR, see the documentation to get
a description of the \s-1XML\s0 network format used by libvirt.
.IP "\fBnet-define\fR \fIfile\fR" 4
.IX Item "net-define file"
Define a virtual network from an \s-1XML\s0 \fIfile\fR, the network is just defined but
not instantiated.
.IP "\fBnet-destroy\fR \fInetwork\fR" 4
.IX Item "net-destroy network"
Destroy a given virtual network specified by its name or \s-1UUID\s0. This takes
effect immediately.
.IP "\fBnet-dumpxml\fR \fInetwork\fR" 4
.IX Item "net-dumpxml network"
Output the virtual network information as an \s-1XML\s0 dump to stdout.
.IP "\fBnet-edit\fR \fInetwork\fR" 4
.IX Item "net-edit network"
Edit the \s-1XML\s0 configuration file for a network.
.Sp
This is equivalent to:
.Sp
.Vb 3
\& virsh net\-dumpxml network > network.xml
\& vi network.xml (or make changes with your other text editor)
\& virsh net\-define network.xml
.Ve
.Sp
except that it does some error checking.
.Sp
The editor used can be supplied by the \f(CW$VISUAL\fR or \f(CW$EDITOR\fR environment
variables, and defaults to \f(CW\*(C`vi\*(C'\fR.
.IP "\fBnet-info\fR \fInetwork\fR" 4
.IX Item "net-info network"
Returns basic information about the \fInetwork\fR object.
.IP "\fBnet-list\fR optional \fI\-\-inactive\fR or \fI\-\-all\fR" 4
.IX Item "net-list optional --inactive or --all"
Returns the list of active networks, if \fI\-\-all\fR is specified this will also
include defined but inactive networks, if \fI\-\-inactive\fR is specified only the
inactive ones will be listed.
.IP "\fBnet-name\fR \fInetwork-UUID\fR" 4
.IX Item "net-name network-UUID"
Convert a network \s-1UUID\s0 to network name.
.IP "\fBnet-start\fR \fInetwork\fR" 4
.IX Item "net-start network"
Start a (previously defined) inactive network.
.IP "\fBnet-undefine\fR \fInetwork\fR" 4
.IX Item "net-undefine network"
Undefine the configuration for an inactive network.
.IP "\fBnet-uuid\fR \fInetwork-name\fR" 4
.IX Item "net-uuid network-name"
Convert a network name to network \s-1UUID\s0.
.SH "STORAGE POOL COMMANDS"
.IX Header "STORAGE POOL COMMANDS"
The following commands manipulate storage pools. Libvirt has the
capability to manage various storage solutions, including files, raw
partitions, and domain-specific formats, used to provide the storage
volumes visible as devices within virtual machines. For more detailed
information about this feature, see the documentation at
<http://libvirt.org/formatstorage.html> . A lot of the commands for
pools are similar to the ones used for domains.
.IP "\fBfind-storage-pool-sources\fR \fItype\fR optional \fIsrcSpec\fR" 4
.IX Item "find-storage-pool-sources type optional srcSpec"
Returns \s-1XML\s0 describing all storage pools of a given \fItype\fR that could
be found.  If \fIsrcSpec\fR is provided, it is a file that contains \s-1XML\s0
to further restrict the query for pools.
.IP "\fBfind-storage-pool-sources\fR \fItype\fR optional \fIhost\fR \fIport\fR" 4
.IX Item "find-storage-pool-sources type optional host port"
Returns \s-1XML\s0 describing all storage pools of a given \fItype\fR that could
be found.  If \fIhost\fR and \fIport\fR are provided, they control where the
query is performed.
.IP "\fBpool-autostart\fR \fIpool-or-uuid\fR optional \fI\-\-disable\fR" 4
.IX Item "pool-autostart pool-or-uuid optional --disable"
Configure whether \fIpool\fR should automatically start at boot.
.IP "\fBpool-build\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-build pool-or-uuid"
Build a given pool.
.IP "\fBpool-create\fR \fIfile\fR" 4
.IX Item "pool-create file"
Create and start a pool object from the \s-1XML\s0 \fIfile\fR.
.IP "\fBpool-create-as\fR \fIname\fR \fI\-\-print\-xml\fR \fItype\fR optional \fIsource-host\fR \fIsource-path\fR \fIsource-dev\fR \fIsource-name\fR <target> \fI\-\-source\-format format\fR" 4
.IX Item "pool-create-as name --print-xml type optional source-host source-path source-dev source-name <target> --source-format format"
Create and start a pool object \fIname\fR from the raw parameters.  If
\&\fI\-\-print\-xml\fR is specified, then print the \s-1XML\s0 of the pool object
without creating the pool.  Otherwise, the pool has the specified
\&\fItype\fR.
.IP "\fBpool-define\fR \fIfile\fR" 4
.IX Item "pool-define file"
Create, but do not start, a pool object from the \s-1XML\s0 \fIfile\fR.
.IP "\fBpool-define-as\fR \fIname\fR \fI\-\-print\-xml\fR \fItype\fR optional \fIsource-host\fR \fIsource-path\fR \fIsource-dev\fR \fIsource-name\fR <target> \fI\-\-source\-format format\fR" 4
.IX Item "pool-define-as name --print-xml type optional source-host source-path source-dev source-name <target> --source-format format"
Create, but do not start, a pool object \fIname\fR from the raw parameters.  If
\&\fI\-\-print\-xml\fR is specified, then print the \s-1XML\s0 of the pool object
without defining the pool.  Otherwise, the pool has the specified
\&\fItype\fR.
.IP "\fBpool-destroy\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-destroy pool-or-uuid"
Destroy a given \fIpool\fR object. Libvirt will no longer manage the
storage described by the pool object, but the raw data contained in
the pool is not changed, and can be later recovered with
\&\fBpool-create\fR.
.IP "\fBpool-delete\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-delete pool-or-uuid"
Destroy the resources used by a given \fIpool\fR object. This operation
is non-recoverable.  The \fIpool\fR object will still exist after this
command.
.IP "\fBpool-dumpxml\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-dumpxml pool-or-uuid"
Returns the \s-1XML\s0 information about the \fIpool\fR object.
.IP "\fBpool-edit\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-edit pool-or-uuid"
Edit the \s-1XML\s0 configuration file for a storage pool.
.Sp
This is equivalent to:
.Sp
.Vb 3
\& virsh pool\-dumpxml pool > pool.xml
\& vi pool.xml (or make changes with your other text editor)
\& virsh pool\-define pool.xml
.Ve
.Sp
except that it does some error checking.
.Sp
The editor used can be supplied by the \f(CW$VISUAL\fR or \f(CW$EDITOR\fR environment
variables, and defaults to \f(CW\*(C`vi\*(C'\fR.
.IP "\fBpool-info\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-info pool-or-uuid"
Returns basic information about the \fIpool\fR object.
.IP "\fBpool-list\fR optional \fI\-\-inactive\fR \fI\-\-all\fR \fI\-\-details\fR" 4
.IX Item "pool-list optional --inactive --all --details"
List pool objects known to libvirt.  By default, only pools in use by
active domains are listed; \fI\-\-inactive\fR lists just the inactive
pools, and \fI\-\-all\fR lists all pools. The \fI\-\-details\fR option instructs
virsh to additionally display pool persistence and capacity related
information where available.
.IP "\fBpool-name\fR \fIuuid\fR" 4
.IX Item "pool-name uuid"
Convert the \fIuuid\fR to a pool name.
.IP "\fBpool-refresh\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-refresh pool-or-uuid"
Refresh the list of volumes contained in \fIpool\fR.
.IP "\fBpool-start\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-start pool-or-uuid"
Start the storage \fIpool\fR, which is previously defined but inactive.
.IP "\fBpool-undefine\fR \fIpool-or-uuid\fR" 4
.IX Item "pool-undefine pool-or-uuid"
Undefine the configuration for an inactive \fIpool\fR.
.IP "\fBpool-uuid\fR \fIpool\fR" 4
.IX Item "pool-uuid pool"
Returns the \s-1UUID\s0 of the named \fIpool\fR.
.SH "VOLUME COMMANDS"
.IX Header "VOLUME COMMANDS"
.IP "\fBvol-create\fR \fIpool-or-uuid\fR \fI\s-1FILE\s0\fR" 4
.IX Item "vol-create pool-or-uuid FILE"
Create a volume from an \s-1XML\s0 <file>.
\&\fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool to create the volume in.
\&\fI\s-1FILE\s0\fR is the \s-1XML\s0 <file> with the volume definition. An easy way to create the
\&\s-1XML\s0 <file> is to use the \fBvol-dumpxml\fR command to obtain the definition of a
pre-existing volume.
.Sp
\&\fBExample\fR
.Sp
.Vb 3
\& virsh vol\-dumpxml \-\-pool storagepool1 appvolume1 > newvolume.xml
\& vi newvolume.xml (or make changes with your other text editor)
\& virsh vol\-create differentstoragepool newvolume.xml
.Ve
.IP "\fBvol-create-from\fR \fIpool-or-uuid\fR \fI\s-1FILE\s0\fR [optional \fI\-\-inputpool\fR \fIpool-or-uuid\fR] \fIvol-name-or-key-or-path\fR" 4
.IX Item "vol-create-from pool-or-uuid FILE [optional --inputpool pool-or-uuid] vol-name-or-key-or-path"
Create a volume, using another volume as input.
\&\fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool to create the volume in.
\&\fI\s-1FILE\s0\fR is the \s-1XML\s0 <file> with the volume definition.
\&\fI\-\-inputpool\fR \fIpool-or-uuid\fR is the name or uuid of the storage pool the
source volume is in.
\&\fIvol-name-or-key-or-path\fR is the name or key or path of the source volume.
.IP "\fBvol-create-as\fR \fIpool-or-uuid\fR \fIname\fR \fIcapacity\fR optional \fI\-\-allocation\fR \fIsize\fR \fI\-\-format\fR \fIstring\fR \fI\-\-backing\-vol\fR \fIvol-name-or-key-or-path\fR \fI\-\-backing\-vol\-format\fR \fIstring\fR" 4
.IX Item "vol-create-as pool-or-uuid name capacity optional --allocation size --format string --backing-vol vol-name-or-key-or-path --backing-vol-format string"
Create a volume from a set of arguments.
\&\fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool to create the volume
in.
\&\fIname\fR is the name of the new volume.
\&\fIcapacity\fR is the size of the volume to be created, with optional k, M, G, or
T suffix.
\&\fI\-\-allocation\fR \fIsize\fR is the initial size to be allocated in the volume, with
optional k, M, G, or T suffix.
\&\fI\-\-format\fR \fIstring\fR is used in file based storage pools to specify the volume
file format to use; raw, bochs, qcow, qcow2, vmdk.
\&\fI\-\-backing\-vol\fR \fIvol-name-or-key-or-path\fR is the source backing
volume to be used if taking a snapshot of an existing volume.
\&\fI\-\-backing\-vol\-format\fR \fIstring\fR is the format of the snapshot backing volume;
raw, bochs, qcow, qcow2, vmdk, host_device.
.IP "\fBvol-clone\fR [optional \fI\-\-pool\fR \fIpool-or-uuid\fR] \fIvol-name-or-key-or-path\fR \fIname\fR" 4
.IX Item "vol-clone [optional --pool pool-or-uuid] vol-name-or-key-or-path name"
Clone an existing volume.  Less powerful, but easier to type, version of
\&\fBvol-create-from\fR.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool to create the volume in.
\&\fIvol-name-or-key-or-path\fR is the name or key or path of the source volume.
\&\fIname\fR is the name of the new volume.
.IP "\fBvol-delete\fR [optional \fI\-\-pool\fR \fIpool-or-uuid\fR] \fIvol-name-or-key-or-path\fR" 4
.IX Item "vol-delete [optional --pool pool-or-uuid] vol-name-or-key-or-path"
Delete a given volume.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool the volume is in.
\&\fIvol-name-or-key-or-path\fR is the name or key or path of the volume to delete.
.IP "\fBvol-wipe\fR [optional \fI\-\-pool\fR \fIpool-or-uuid\fR] \fIvol-name-or-key-or-path\fR" 4
.IX Item "vol-wipe [optional --pool pool-or-uuid] vol-name-or-key-or-path"
Wipe a volume, ensure data previously on the volume is not accessible to future reads.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool the volume is in.
\&\fIvol-name-or-key-or-path\fR is the name or key or path of the volume to wipe.
.IP "\fBvol-dumpxml\fR [optional \fI\-\-pool\fR \fIpool-or-uuid\fR] \fIvol-name-or-key-or-path\fR" 4
.IX Item "vol-dumpxml [optional --pool pool-or-uuid] vol-name-or-key-or-path"
Output the volume information as an \s-1XML\s0 dump to stdout.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool the volume is in.
\&\fIvol-name-or-key-or-path\fR is the name or key or path of the volume to output the \s-1XML\s0 of.
.IP "\fBvol-info\fR [optional \fI\-\-pool\fR \fIpool-or-uuid\fR] \fIvol-name-or-key-or-path\fR" 4
.IX Item "vol-info [optional --pool pool-or-uuid] vol-name-or-key-or-path"
Returns basic information about the given storage volume.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool the volume is in.
\&\fIvol-name-or-key-or-path\fR is the name or key or path of the volume to return information for.
.IP "\fBvol-list\fR [optional \fI\-\-pool\fR] \fIpool-or-uuid\fR optional \fI\-\-details\fR" 4
.IX Item "vol-list [optional --pool] pool-or-uuid optional --details"
Return the list of volumes in the given storage pool.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool.
The \fI\-\-details\fR option instructs virsh to additionally display volume
type and capacity related information where available.
.IP "\fBvol-pool\fR [optional \fI\-\-uuid\fR] \fIvol-key-or-path\fR" 4
.IX Item "vol-pool [optional --uuid] vol-key-or-path"
Return the pool name or \s-1UUID\s0 for a given volume. By default, the pool name is
returned. If the \fI\-\-uuid\fR option is given, the pool \s-1UUID\s0 is returned instead.
\&\fIvol-key-or-path\fR is the key or path of the volume to return the pool
information for.
.IP "\fBvol-path\fR [optional \fI\-\-pool\fR \fIpool-or-uuid\fR] \fIvol-name-or-key\fR" 4
.IX Item "vol-path [optional --pool pool-or-uuid] vol-name-or-key"
Return the path for a given volume.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool the volume is in.
\&\fIvol-name-or-key\fR is the name or key of the volume to return the path for.
.IP "\fBvol-name\fR \fIvol-key-or-path\fR" 4
.IX Item "vol-name vol-key-or-path"
Return the name for a given volume.
\&\fIvol-key-or-path\fR is the key or path of the volume to return the name for.
.IP "\fBvol-key\fR [optional \fI\-\-pool\fR \fIpool-or-uuid\fR] \fIvol-name-or-path\fR" 4
.IX Item "vol-key [optional --pool pool-or-uuid] vol-name-or-path"
Return the volume key for a given volume.
\&\fI\-\-pool\fR \fIpool-or-uuid\fR is the name or \s-1UUID\s0 of the storage pool the volume is in.
\&\fIvol-name-or-path\fR is the name or path of the volume to return the volume key for.
.SH "SECRET COMMMANDS"
.IX Header "SECRET COMMMANDS"
The following commands manipulate \*(L"secrets\*(R" (e.g. passwords, passphrases and
encryption keys).  Libvirt can store secrets independently from their use, and
other objects (e.g. volumes or domains) can refer to the secrets for encryption
or possibly other uses.  Secrets are identified using an \s-1UUID\s0.  See
<http://libvirt.org/formatsecret.html> for documentation of the \s-1XML\s0 format
used to represent properties of secrets.
.IP "\fBsecret-define\fR \fIfile\fR" 4
.IX Item "secret-define file"
Create a secret with the properties specified in \fIfile\fR, with no associated
secret value.  If \fIfile\fR does not specify a \s-1UUID\s0, choose one automatically.
If \fIfile\fR specifies an \s-1UUID\s0 of an existing secret, replace its properties by
properties defined in \fIfile\fR, without affecting the secret value.
.IP "\fBsecret-dumpxml\fR \fIsecret\fR" 4
.IX Item "secret-dumpxml secret"
Output properties of \fIsecret\fR (specified by its \s-1UUID\s0) as an \s-1XML\s0 dump to stdout.
.IP "\fBsecret-set-value\fR \fIsecret\fR \fIbase64\fR" 4
.IX Item "secret-set-value secret base64"
Set the value associated with \fIsecret\fR (specified by its \s-1UUID\s0) to the value
Base64\-encoded value \fIbase64\fR.
.IP "\fBsecret-get-value\fR \fIsecret\fR" 4
.IX Item "secret-get-value secret"
Output the value associated with \fIsecret\fR (specified by its \s-1UUID\s0) to stdout,
encoded using Base64.
.IP "\fBsecret-undefine\fR \fIsecret\fR" 4
.IX Item "secret-undefine secret"
Delete a \fIsecret\fR (specified by its \s-1UUID\s0), including the associated value, if
any.
.IP "\fBsecret-list\fR" 4
.IX Item "secret-list"
Output a list of UUIDs of known secrets to stdout.
.SH "SNAPSHOT COMMMANDS"
.IX Header "SNAPSHOT COMMMANDS"
The following commands manipulate domain snapshots.  Snapshots take the
disk, memory, and device state of a domain at a point-of-time, and save it
for future use.  They have many uses, from saving a \*(L"clean\*(R" copy of an \s-1OS\s0
image to saving a domain's state before a potentially destructive operation.
Snapshots are identified with a unique name.  See
<http://libvirt.org/formatsnapshot.html> for documentation of the \s-1XML\s0 format
used to represent properties of snapshots.
.IP "\fBsnapshot-create\fR \fIdomain\fR \fIxmlfile\fR" 4
.IX Item "snapshot-create domain xmlfile"
Create a snapshot for domain \fIdomain\fR with the properties specified in
\&\fIxmlfile\fR.  The only properties settable for a domain snapshot are the
<name> and <description>; the rest of the fields are ignored, and
automatically filled in by libvirt.  If \fIxmlfile\fR is completely omitted,
then libvirt will choose a value for all fields.
.IP "\fBsnapshot-current\fR \fIdomain\fR" 4
.IX Item "snapshot-current domain"
Output the snapshot \s-1XML\s0 for the domain's current snapshot (if any).
.IP "\fBsnapshot-list\fR \fIdomain\fR" 4
.IX Item "snapshot-list domain"
List all of the available snapshots for the given domain.
.IP "\fBsnapshot-dumpxml\fR \fIdomain\fR \fIsnapshot\fR" 4
.IX Item "snapshot-dumpxml domain snapshot"
Output the snapshot \s-1XML\s0 for the domain's snapshot named \fIsnapshot\fR.
.IP "\fBsnapshot-revert\fR \fIdomain\fR \fIsnapshot\fR" 4
.IX Item "snapshot-revert domain snapshot"
Revert the given domain to the snapshot specified by \fIsnapshot\fR.  Be aware
that this is a destructive action; any changes in the domain since the
snapshot was taken will be lost.  Also note that the state of the domain after
snapshot-revert is complete will be the state of the domain at the time
the original snapshot was taken.
.IP "\fBsnapshot-delete\fR \fIdomain\fR \fIsnapshot\fR \fI\-\-children\fR" 4
.IX Item "snapshot-delete domain snapshot --children"
Delete the snapshot for the domain named \fIsnapshot\fR.  If this snapshot
has child snapshots, changes from this snapshot will be merged into the
children.  If \fI\-\-children\fR is passed, then delete this snapshot and any
children of this snapshot.
.SH "NWFILTER COMMMANDS"
.IX Header "NWFILTER COMMMANDS"
The following commands manipulate network filters. Network filters allow
filtering of the network traffic coming from and going to virtual machines.
Individual network traffic filters are written in \s-1XML\s0 and may contain
references to other network filters, describe traffic filtering rules,
or contain both. Network filters are referenced by virtual machines
from within their interface description. A network filter may be referenced
by multiple virtual machines' interfaces.
.IP "\fBnwfilter-define\fR \fIxmlfile\fR" 4
.IX Item "nwfilter-define xmlfile"
Make a new network filter known to libvirt. If a network filter with
the same name already exists, it will be replaced with the new \s-1XML\s0.
Any running virtual machine referencing this network filter will have
its network traffic rules adapted. If for any reason the network traffic
filtering rules cannot be instantiated by any of the running virtual
machines, then the new \s-1XML\s0 will be rejected.
.IP "\fBnwfilter-undefine\fR \fInwfilter-name\fR" 4
.IX Item "nwfilter-undefine nwfilter-name"
Delete a network filter. The deletion will fail if any running virtual
machine is currently using this network filter.
.IP "\fBnwfilter-list\fR" 4
.IX Item "nwfilter-list"
List all of the available network filters.
.IP "\fBnwfilter-dumpxml\fR \fInwfilter-name\fR" 4
.IX Item "nwfilter-dumpxml nwfilter-name"
Output the network filter \s-1XML\s0.
.IP "\fBnwfilter-edit\fR \fInwfilter-name\fR" 4
.IX Item "nwfilter-edit nwfilter-name"
Edit the \s-1XML\s0 of a network filter.
.Sp
This is equivalent to:
.Sp
.Vb 3
\& virsh nwfilter\-dumpxml myfilter > myfilter.xml
\& vi myfilter.xml (or make changes with your other text editor)
\& virsh nwfilter\-define myfilter.xml
.Ve
.Sp
except that it does some error checking.
The new network filter may be rejected due to the same reason as
mentioned in \fInwfilter-define\fR.
.Sp
The editor used can be supplied by the \f(CW$VISUAL\fR or \f(CW$EDITOR\fR environment
variables, and defaults to \f(CW\*(C`vi\*(C'\fR.
.SH "QEMU-SPECIFIC COMMANDS"
.IX Header "QEMU-SPECIFIC COMMANDS"
\&\s-1NOTE:\s0 Use of the following commands is \fBstrongly\fR discouraged.  They
can cause libvirt to become confused and do the wrong thing on subsequent
operations.  Once you have used this command, please do not report
problems to the libvirt developers; the reports will be ignored.
.IP "\fBqemu-monitor-command\fR \fIdomain\fR \fIcommand\fR optional \fI\-\-hmp\fR" 4
.IX Item "qemu-monitor-command domain command optional --hmp"
Send an arbitrary monitor command \fIcommand\fR to domain \fIdomain\fR through the
qemu monitor.  The results of the command will be printed on stdout.  If
\&\fI\-\-hmp\fR is passed, the command is considered to be a human monitor command
and libvirt will automatically convert it into \s-1QMP\s0 if needed.  In that case
the result will also be converted back from \s-1QMP\s0.
.SH "ENVIRONMENT"
.IX Header "ENVIRONMENT"
The following environment variables can be set to alter the behaviour
of \f(CW\*(C`virsh\*(C'\fR
.IP "\s-1VIRSH_DEFAULT_CONNECT_URI\s0" 4
.IX Item "VIRSH_DEFAULT_CONNECT_URI"
The hypervisor to connect to by default. Set this to a \s-1URI\s0, in the same
format as accepted by the \fBconnect\fR option.
.IP "\s-1VISUAL\s0" 4
.IX Item "VISUAL"
The editor to use by the \fBedit\fR and related options.
.IP "\s-1EDITOR\s0" 4
.IX Item "EDITOR"
The editor to use by the \fBedit\fR and related options, if \f(CW\*(C`VISUAL\*(C'\fR
is not set.
.IP "LIBVIRT_DEBUG=LEVEL" 4
.IX Item "LIBVIRT_DEBUG=LEVEL"
Turn on verbose debugging of all libvirt \s-1API\s0 calls. Valid levels are
.RS 4
.IP "\(bu" 4
LIBVIRT_DEBUG=1
.Sp
Messages at level \s-1DEBUG\s0 or above
.IP "\(bu" 4
LIBVIRT_DEBUG=2
.Sp
Messages at level \s-1INFO\s0 or above
.IP "\(bu" 4
LIBVIRT_DEBUG=3
.Sp
Messages at level \s-1WARNING\s0 or above
.IP "\(bu" 4
LIBVIRT_DEBUG=4
.Sp
Messages at level \s-1ERROR\s0 or above
.RE
.RS 4
.Sp
For further information about debugging options consult \f(CW\*(C`http://libvirt.org/logging.html\*(C'\fR
.RE
.SH "BUGS"
.IX Header "BUGS"
Report any bugs discovered to the libvirt community via the mailing
list \f(CW\*(C`http://libvirt.org/contact.html\*(C'\fR or bug tracker \f(CW\*(C`http://libvirt.org/bugs.html\*(C'\fR.
Alternatively report bugs to your software distributor / vendor.
.SH "AUTHORS"
.IX Header "AUTHORS"
.Vb 1
\&  Please refer to the AUTHORS file distributed with libvirt.
\&
\&  Based on the xm man page by:
\&  Sean Dague <sean at dague dot net>
\&  Daniel Stekloff <dsteklof at us dot ibm dot com>
.Ve
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (C) 2005, 2007\-2010 Red Hat, Inc., and the authors listed in the
libvirt \s-1AUTHORS\s0 file.
.SH "LICENSE"
.IX Header "LICENSE"
virsh is distributed under the terms of the \s-1GNU\s0 \s-1LGPL\s0 v2+.
This is free software; see the source for copying conditions. There
is \s-1NO\s0 warranty; not even for \s-1MERCHANTABILITY\s0 or \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0
\&\s-1PURPOSE\s0
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIvirt\-install\fR\|(1), \fIvirt\-xml\-validate\fR\|(1), \fIvirt\-top\fR\|(1), \fIvirt\-df\fR\|(1),
<http://www.libvirt.org/>
